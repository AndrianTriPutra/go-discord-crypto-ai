package utechnical_test

import (
	"context"
	"encoding/json"
	"godibot-atp/app/usecase/utechnical"
	"godibot-atp/pkg/repository/cex"
	"godibot-atp/pkg/repository/chart"
	"godibot-atp/pkg/repository/discord"
	"godibot-atp/pkg/repository/technical"
	"godibot-atp/pkg/utils/domain"

	"testing"
)

var payload string = `
[
	{
	"Timestamp": "2025-05-01T00:00:00Z",
	"Time": 1746057600,
	"Open": 93993.7,
	"High": 111972.4,
	"Low": 93377.8,
	"Close": 106049,
	"Volume": 60937.12067615547,
	"Turnover": 6359493328.289263
	},
	{
	"Timestamp": "2025-04-01T00:00:00Z",
	"Time": 1743465600,
	"Open": 83418.2,
	"High": 95790,
	"Low": 74505.1,
	"Close": 94001.9,
	"Volume": 76131.72805423886,
	"Turnover": 6432141482.172363
	},
	{
	"Timestamp": "2025-03-01T00:00:00Z",
	"Time": 1740787200,
	"Open": 84009.8,
	"High": 95000,
	"Low": 76604,
	"Close": 83418.1,
	"Volume": 69005.17194954,
	"Turnover": 5885546055.285306
	},
	{
	"Timestamp": "2025-02-01T00:00:00Z",
	"Time": 1738368000,
	"Open": 105445.9,
	"High": 105577,
	"Low": 78252.1,
	"Close": 84023.3,
	"Volume": 67947.48161352979,
	"Turnover": 6361427530.188002
	},
	{
	"Timestamp": "2025-01-01T00:00:00Z",
	"Time": 1735689600,
	"Open": 95410.2,
	"High": 109699.6,
	"Low": 89221,
	"Close": 105453.3,
	"Volume": 75494.50538154015,
	"Turnover": 7557099173.550845
	},
	{
	"Timestamp": "2024-12-01T00:00:00Z",
	"Time": 1733011200,
	"Open": 96638.7,
	"High": 108384.6,
	"Low": 90606.3,
	"Close": 95413.2,
	"Volume": 74907.72353357039,
	"Turnover": 7380771368.370121
	},
	{
	"Timestamp": "2024-11-01T00:00:00Z",
	"Time": 1730419200,
	"Open": 70633.6,
	"High": 99595,
	"Low": 66835.1,
	"Close": 96638.7,
	"Volume": 100652.56454432069,
	"Turnover": 8674331392.544851
	},
	{
	"Timestamp": "2024-10-01T00:00:00Z",
	"Time": 1727740800,
	"Open": 63557.7,
	"High": 73640.5,
	"Low": 58932.1,
	"Close": 70633.7,
	"Volume": 60810.252934711294,
	"Turnover": 3994679518.672084
	},
	{
	"Timestamp": "2024-09-01T00:00:00Z",
	"Time": 1725148800,
	"Open": 59011.5,
	"High": 66575.6,
	"Low": 52550,
	"Close": 63557.7,
	"Volume": 60030.647293017406,
	"Turnover": 3595079948.4567156
	},
	{
	"Timestamp": "2024-08-01T00:00:00Z",
	"Time": 1722470400,
	"Open": 66386.5,
	"High": 66828.9,
	"Low": 48705.8,
	"Close": 59011.5,
	"Volume": 95418.10857750679,
	"Turnover": 5653207773.816968
	},
	{
	"Timestamp": "2024-07-01T00:00:00Z",
	"Time": 1719792000,
	"Open": 61719.7,
	"High": 70066,
	"Low": 53339.7,
	"Close": 66381.8,
	"Volume": 72274.19297707717,
	"Turnover": 4503649384.278112
	},
	{
	"Timestamp": "2024-06-01T00:00:00Z",
	"Time": 1717200000,
	"Open": 67206.8,
	"High": 71993.5,
	"Low": 58416.2,
	"Close": 61717.4,
	"Volume": 51640.44186975,
	"Turnover": 3400885850.148299
	},
	{
	"Timestamp": "2024-05-01T00:00:00Z",
	"Time": 1714521600,
	"Open": 60792.9,
	"High": 71975.9,
	"Low": 56560,
	"Close": 67206.7,
	"Volume": 71835.67915181,
	"Turnover": 4615073442.810065
	},
	{
	"Timestamp": "2024-04-01T00:00:00Z",
	"Time": 1711929600,
	"Open": 70375.1,
	"High": 72780.5,
	"Low": 59600,
	"Close": 60792.9,
	"Volume": 101777.33402261,
	"Turnover": 6678843908.327635
	},
	{
	"Timestamp": "2024-03-01T00:00:00Z",
	"Time": 1709251200,
	"Open": 62770.4,
	"High": 73773.6,
	"Low": 59000,
	"Close": 70375.1,
	"Volume": 242587.38706232,
	"Turnover": 16250423454.720726
	},
	{
	"Timestamp": "2024-02-01T00:00:00Z",
	"Time": 1706745600,
	"Open": 43354.7,
	"High": 64021,
	"Low": 41886.8,
	"Close": 62768,
	"Volume": 155945.43230549,
	"Turnover": 7962928955.890015
	},
	{
	"Timestamp": "2024-01-01T00:00:00Z",
	"Time": 1704067200,
	"Open": 42278.8,
	"High": 48989,
	"Low": 38559,
	"Close": 42585.1,
	"Volume": 124451.34915783528,
	"Turnover": 5416717829.5724125
	},
	{
	"Timestamp": "2023-12-01T00:00:00Z",
	"Time": 1701388800,
	"Open": 37723.2,
	"High": 44699.2,
	"Low": 37616.4,
	"Close": 42277.2,
	"Volume": 97575.81187303,
	"Turnover": 4137326621.8058643
	},
	{
	"Timestamp": "2023-11-01T00:00:00Z",
	"Time": 1698796800,
	"Open": 34639,
	"High": 38447.7,
	"Low": 34100,
	"Close": 37719.7,
	"Volume": 79014.72713448,
	"Turnover": 2876471593.5277085
	},
	{
	"Timestamp": "2023-10-01T00:00:00Z",
	"Time": 1696118400,
	"Open": 26962.8,
	"High": 35263.5,
	"Low": 26538.4,
	"Close": 34639.5,
	"Volume": 84853.43102254,
	"Turnover": 2551159082.9876456
	},
	{
	"Timestamp": "2023-09-01T00:00:00Z",
	"Time": 1693526400,
	"Open": 25940.4,
	"High": 27484.9,
	"Low": 24901.7,
	"Close": 26962.8,
	"Volume": 64637.24758002148,
	"Turnover": 1699412910.1115625
	},
	{
	"Timestamp": "2023-08-01T00:00:00Z",
	"Time": 1690848000,
	"Open": 29234.3,
	"High": 30228.7,
	"Low": 25000,
	"Close": 25940.4,
	"Volume": 74597.20058907,
	"Turnover": 2067939863.278091
	},
	{
	"Timestamp": "2023-07-01T00:00:00Z",
	"Time": 1688169600,
	"Open": 30475.1,
	"High": 31819.9,
	"Low": 28872.4,
	"Close": 29234.2,
	"Volume": 83115.32766579,
	"Turnover": 2513860930.569688
	},
	{
	"Timestamp": "2023-06-01T00:00:00Z",
	"Time": 1685577600,
	"Open": 27211.7,
	"High": 31424.5,
	"Low": 24807.5,
	"Close": 30475.1,
	"Volume": 157673.12547835,
	"Turnover": 4423194505.556215
	},
	{
	"Timestamp": "2023-05-01T00:00:00Z",
	"Time": 1682899200,
	"Open": 29232,
	"High": 29821.7,
	"Low": 25802.4,
	"Close": 27211.6,
	"Volume": 104265.67591907,
	"Turnover": 2879621182.2531905
	},
	{
	"Timestamp": "2023-04-01T00:00:00Z",
	"Time": 1680307200,
	"Open": 28467.2,
	"High": 31020,
	"Low": 26960,
	"Close": 29232,
	"Volume": 139766.42532698,
	"Turnover": 4033073402.7685676
	},
	{
	"Timestamp": "2023-03-01T00:00:00Z",
	"Time": 1677628800,
	"Open": 23141.9,
	"High": 29185.1,
	"Low": 19558.1,
	"Close": 28467.2,
	"Volume": 227134.85310401,
	"Turnover": 5709851521.044186
	},
	{
	"Timestamp": "2023-02-01T00:00:00Z",
	"Time": 1675209600,
	"Open": 23130.1,
	"High": 25253,
	"Low": 21352.3,
	"Close": 23138.1,
	"Volume": 152770.85011348,
	"Turnover": 3567069766.945768
	},
	{
	"Timestamp": "2023-01-01T00:00:00Z",
	"Time": 1672531200,
	"Open": 16540.1,
	"High": 23954.9,
	"Low": 16502.3,
	"Close": 23130.1,
	"Volume": 202273.00290483,
	"Turnover": 4221008993.1526194
	},
	{
	"Timestamp": "2022-12-01T00:00:00Z",
	"Time": 1669852800,
	"Open": 17163.6,
	"High": 18377.4,
	"Low": 16264.9,
	"Close": 16540,
	"Volume": 145271.91701618,
	"Turnover": 2463845287.8411207
	},
	{
	"Timestamp": "2022-11-01T00:00:00Z",
	"Time": 1667260800,
	"Open": 20491.5,
	"High": 21480,
	"Low": 15473.6,
	"Close": 17163.5,
	"Volume": 485236.84795516,
	"Turnover": 8664801731.940922
	},
	{
	"Timestamp": "2022-10-01T00:00:00Z",
	"Time": 1664582400,
	"Open": 19422,
	"High": 21093.6,
	"Low": 18121.4,
	"Close": 20492,
	"Volume": 448897.75782448,
	"Turnover": 8803800632.763218
	},
	{
	"Timestamp": "2022-09-01T00:00:00Z",
	"Time": 1661990400,
	"Open": 20052,
	"High": 22800,
	"Low": 18135.8,
	"Close": 19422,
	"Volume": 595923.61531761,
	"Turnover": 11643262354.755157
	},
	{
	"Timestamp": "2022-08-01T00:00:00Z",
	"Time": 1659312000,
	"Open": 23295.6,
	"High": 25206.7,
	"Low": 19519.9,
	"Close": 20055.9,
	"Volume": 254014.14182322,
	"Turnover": 5689327332.65204
	},
	{
	"Timestamp": "2022-07-01T00:00:00Z",
	"Time": 1656633600,
	"Open": 19937.8,
	"High": 24721,
	"Low": 18789.1,
	"Close": 23295.6,
	"Volume": 359391.39050103,
	"Turnover": 7661470498.060969
	},
	{
	"Timestamp": "2022-06-01T00:00:00Z",
	"Time": 1654041600,
	"Open": 31794.7,
	"High": 31988.5,
	"Low": 17614.7,
	"Close": 19937.8,
	"Volume": 520075.26025354,
	"Turnover": 12179559778.55401
	},
	{
	"Timestamp": "2022-05-01T00:00:00Z",
	"Time": 1651363200,
	"Open": 37629.9,
	"High": 40039,
	"Low": 26736.1,
	"Close": 31794.7,
	"Volume": 486238.4485685,
	"Turnover": 15253543835.26355
	},
	{
	"Timestamp": "2022-04-01T00:00:00Z",
	"Time": 1648771200,
	"Open": 45516.5,
	"High": 47476,
	"Low": 37562.2,
	"Close": 37629.8,
	"Volume": 389018.66528544,
	"Turnover": 16583366039.913565
	},
	{
	"Timestamp": "2022-03-01T00:00:00Z",
	"Time": 1646092800,
	"Open": 43174.8,
	"High": 48195.2,
	"Low": 37162,
	"Close": 45516.6,
	"Volume": 230861.90369427,
	"Turnover": 9794678118.252977
	},
	{
	"Timestamp": "2022-02-01T00:00:00Z",
	"Time": 1643673600,
	"Open": 38467.4,
	"High": 45831.9,
	"Low": 34325,
	"Close": 43179.8,
	"Volume": 253267.48654304,
	"Turnover": 10246466061.805208
	},
	{
	"Timestamp": "2022-01-01T00:00:00Z",
	"Time": 1640995200,
	"Open": 46216.4,
	"High": 47990,
	"Low": 32918.7,
	"Close": 38467.3,
	"Volume": 306073.10009662,
	"Turnover": 12340571369.371422
	},
	{
	"Timestamp": "2021-12-01T00:00:00Z",
	"Time": 1638316800,
	"Open": 56937.8,
	"High": 59038.7,
	"Low": 40589,
	"Close": 46216.4,
	"Volume": 264954.6648424,
	"Turnover": 13024099607.591278
	},
	{
	"Timestamp": "2021-11-01T00:00:00Z",
	"Time": 1635724800,
	"Open": 61293.9,
	"High": 69028,
	"Low": 53235.6,
	"Close": 56928.1,
	"Volume": 217092.35300279,
	"Turnover": 13097356269.97714
	},
	{
	"Timestamp": "2021-10-01T00:00:00Z",
	"Time": 1633046400,
	"Open": 43819.1,
	"High": 66985.9,
	"Low": 43293.6,
	"Close": 61293.6,
	"Volume": 262675.4023482,
	"Turnover": 15206658067.734816
	},
	{
	"Timestamp": "2021-09-01T00:00:00Z",
	"Time": 1630454400,
	"Open": 47095.5,
	"High": 52920,
	"Low": 39571,
	"Close": 43817.2,
	"Volume": 171787.22000176,
	"Turnover": 7849184889.815422
	},
	{
	"Timestamp": "2021-08-01T00:00:00Z",
	"Time": 1627776000,
	"Open": 41464,
	"High": 50531.2,
	"Low": 37304.2,
	"Close": 47095.5,
	"Volume": 220451.34702963,
	"Turnover": 9926880531.18749
	},
	{
	"Timestamp": "2021-07-01T00:00:00Z",
	"Time": 1625097600,
	"Open": 35045.4,
	"High": 42423.4,
	"Low": 29272,
	"Close": 41464,
	"Volume": 149637.27344756,
	"Turnover": 5254134116.720048
	},
	{
	"Timestamp": "2021-06-01T00:00:00Z",
	"Time": 1622505600,
	"Open": 37257.6,
	"High": 41355.3,
	"Low": 28801.8,
	"Close": 35045.4,
	"Volume": 234181.45147441,
	"Turnover": 8307352086.681459
	},
	{
	"Timestamp": "2021-05-01T00:00:00Z",
	"Time": 1619827200,
	"Open": 57697.3,
	"High": 59499.9,
	"Low": 29000,
	"Close": 37257.6,
	"Volume": 278499.72873558,
	"Turnover": 12333791374.444536
	},
	{
	"Timestamp": "2021-04-01T00:00:00Z",
	"Time": 1617235200,
	"Open": 58745.5,
	"High": 64840,
	"Low": 46966.2,
	"Close": 57697.3,
	"Volume": 161979.01671418,
	"Turnover": 9190689587.910563
	},
	{
	"Timestamp": "2021-03-01T00:00:00Z",
	"Time": 1614556800,
	"Open": 45136.5,
	"High": 61815.3,
	"Low": 44958.9,
	"Close": 58745.9,
	"Volume": 126640.47594592,
	"Turnover": 6951345517.652516
	},
	{
	"Timestamp": "2021-02-01T00:00:00Z",
	"Time": 1612137600,
	"Open": 33100.7,
	"High": 58336.3,
	"Low": 32300,
	"Close": 45141.6,
	"Volume": 106227.23751446,
	"Turnover": 4929662650.259829
	},
	{
	"Timestamp": "2021-01-01T00:00:00Z",
	"Time": 1609459200,
	"Open": 28924.9,
	"High": 41948.3,
	"Low": 27500,
	"Close": 33100.8,
	"Volume": 154967.66963832,
	"Turnover": 5347437095.123192
	},
	{
	"Timestamp": "2020-12-01T00:00:00Z",
	"Time": 1606780800,
	"Open": 19693.8,
	"High": 29333.1,
	"Low": 17584.2,
	"Close": 28920.5,
	"Volume": 66970.46324641,
	"Turnover": 1517493740.4708169
	},
	{
	"Timestamp": "2020-11-01T00:00:00Z",
	"Time": 1604188800,
	"Open": 13792,
	"High": 19868.3,
	"Low": 13196.3,
	"Close": 19693.9,
	"Volume": 80813.09898154,
	"Turnover": 1337837041.8178813
	},
	{
	"Timestamp": "2020-10-01T00:00:00Z",
	"Time": 1601510400,
	"Open": 10777.2,
	"High": 14100,
	"Low": 10371.6,
	"Close": 13792.1,
	"Volume": 57892.37966726,
	"Turnover": 703358129.5835927
	},
	{
	"Timestamp": "2020-09-01T00:00:00Z",
	"Time": 1598918400,
	"Open": 11651.6,
	"High": 12049.4,
	"Low": 9825,
	"Close": 10777.2,
	"Volume": 116394.87615154,
	"Turnover": 1230712294.1920686
	},
	{
	"Timestamp": "2020-08-01T00:00:00Z",
	"Time": 1596240000,
	"Open": 11336.3,
	"High": 12450,
	"Low": 9998,
	"Close": 11651.6,
	"Volume": 126964.97192169,
	"Turnover": 1475481644.503399
	},
	{
	"Timestamp": "2020-07-01T00:00:00Z",
	"Time": 1593561600,
	"Open": 9136.6,
	"High": 11446.3,
	"Low": 8912,
	"Close": 11336.4,
	"Volume": 91951.84455383,
	"Turnover": 912007976.030995
	},
	{
	"Timestamp": "2020-06-01T00:00:00Z",
	"Time": 1590969600,
	"Open": 9450.2,
	"High": 10369.7,
	"Low": 8836.3,
	"Close": 9136.6,
	"Volume": 68507.3044138,
	"Turnover": 649165393.3043948
	},
	{
	"Timestamp": "2020-05-01T00:00:00Z",
	"Time": 1588291200,
	"Open": 8623.7,
	"High": 10049.8,
	"Low": 8000,
	"Close": 9450,
	"Volume": 113257.2105214,
	"Turnover": 1040039279.2824973
	},
	{
	"Timestamp": "2020-04-01T00:00:00Z",
	"Time": 1585699200,
	"Open": 6410.8,
	"High": 9455.9,
	"Low": 6151.9,
	"Close": 8624.3,
	"Volume": 77025.9568462,
	"Turnover": 567422570.6386516
	},
	{
	"Timestamp": "2020-03-01T00:00:00Z",
	"Time": 1583020800,
	"Open": 8524.4,
	"High": 9184.9,
	"Low": 3800,
	"Close": 6409.7,
	"Volume": 100737.15965856,
	"Turnover": 633250832.4551966
	},
	{
	"Timestamp": "2020-02-01T00:00:00Z",
	"Time": 1580515200,
	"Open": 9350.8,
	"High": 10496.5,
	"Low": 8443,
	"Close": 8527.1,
	"Volume": 39428.75366923,
	"Turnover": 378955454.71086156
	},
	{
	"Timestamp": "2020-01-01T00:00:00Z",
	"Time": 1577836800,
	"Open": 7196.2,
	"High": 9635,
	"Low": 6867,
	"Close": 9350.1,
	"Volume": 42621.46278806,
	"Turnover": 358718959.34774816
	},
	{
	"Timestamp": "2019-12-01T00:00:00Z",
	"Time": 1575158400,
	"Open": 7544.9,
	"High": 7765.3,
	"Low": 6437,
	"Close": 7196.1,
	"Volume": 19885.8552293,
	"Turnover": 144080910.82729566
	},
	{
	"Timestamp": "2019-11-01T00:00:00Z",
	"Time": 1572566400,
	"Open": 9142.7,
	"High": 9502.9,
	"Low": 6516.5,
	"Close": 7544.8,
	"Volume": 22398.11649838,
	"Turnover": 180982584.71223608
	},
	{
	"Timestamp": "2019-10-01T00:00:00Z",
	"Time": 1569888000,
	"Open": 8289.1,
	"High": 10348.6,
	"Low": 7310,
	"Close": 9141.6,
	"Volume": 22890.44018899,
	"Turnover": 194267465.17467794
	},
	{
	"Timestamp": "2019-09-01T00:00:00Z",
	"Time": 1567296000,
	"Open": 9585.2,
	"High": 10900,
	"Low": 7722.3,
	"Close": 8287.5,
	"Volume": 64082.82404456,
	"Turnover": 643253994.3033065
	},
	{
	"Timestamp": "2019-08-01T00:00:00Z",
	"Time": 1564617600,
	"Open": 10072.8,
	"High": 12309.3,
	"Low": 9326,
	"Close": 9584.4,
	"Volume": 318964.8288392,
	"Turnover": 3386167539.632954
	},
	{
	"Timestamp": "2019-07-01T00:00:00Z",
	"Time": 1561939200,
	"Open": 10831.1,
	"High": 13139,
	"Low": 9072.5,
	"Close": 10076.6,
	"Volume": 245900.34391895,
	"Turnover": 2522407600.046711
	},
	{
	"Timestamp": "2019-06-01T00:00:00Z",
	"Time": 1559347200,
	"Open": 8555.6,
	"High": 13947.7,
	"Low": 7456.5,
	"Close": 10831.1,
	"Volume": 20604.25792849,
	"Turnover": 206311617.2081389
	},
	{
	"Timestamp": "2019-05-01T00:00:00Z",
	"Time": 1556668800,
	"Open": 5323.4,
	"High": 9068.9,
	"Low": 5318.2,
	"Close": 8555.6,
	"Volume": 15013.76194819,
	"Turnover": 111991554.98943986
	},
	{
	"Timestamp": "2019-04-01T00:00:00Z",
	"Time": 1554076800,
	"Open": 4102.9,
	"High": 5700,
	"Low": 4074.3,
	"Close": 5319.6,
	"Volume": 12177.68368409,
	"Turnover": 61664551.528997324
	},
	{
	"Timestamp": "2019-03-01T00:00:00Z",
	"Time": 1551398400,
	"Open": 3816.1300759,
	"High": 6950,
	"Low": 3679.8,
	"Close": 4103.7,
	"Volume": 5203.865656677639,
	"Turnover": 20614689.8809046
	},
	{
	"Timestamp": "2019-02-01T00:00:00Z",
	"Time": 1548979200,
	"Open": 3435.406627,
	"High": 4198.47174203,
	"Low": 3379.005494,
	"Close": 3816.1300759,
	"Volume": 2691.242891255536,
	"Turnover": 9993973.404147334
	},
	{
	"Timestamp": "2019-01-01T00:00:00Z",
	"Time": 1546300800,
	"Open": 3700.170853,
	"High": 4061.280555,
	"Low": 3352.150773,
	"Close": 3435.476794,
	"Volume": 3387.80765026,
	"Turnover": 12380765.88231802
	},
	{
	"Timestamp": "2018-12-01T00:00:00Z",
	"Time": 1543622400,
	"Open": 4037.478902,
	"High": 4309.999999,
	"Low": 3160.000001,
	"Close": 3698.472219,
	"Volume": 10044.73170117,
	"Turnover": 37225313.97976923
	},
	{
	"Timestamp": "2018-11-01T00:00:00Z",
	"Time": 1541030400,
	"Open": 6372.363853,
	"High": 6614.141864,
	"Low": 3663,
	"Close": 4039.636827,
	"Volume": 8787.70131766,
	"Turnover": 43233159.40224965
	},
	{
	"Timestamp": "2018-10-01T00:00:00Z",
	"Time": 1538352000,
	"Open": 6620.891627,
	"High": 7550,
	"Low": 6208.747108,
	"Close": 6373.833345,
	"Volume": 4806.36099681,
	"Turnover": 31690451.26326202
	},
	{
	"Timestamp": "2018-09-01T00:00:00Z",
	"Time": 1535760000,
	"Open": 7018.474023,
	"High": 7413.193136,
	"Low": 6109.282084,
	"Close": 6615.100005,
	"Volume": 6172.02984111,
	"Turnover": 40749970.66181858
	},
	{
	"Timestamp": "2018-08-01T00:00:00Z",
	"Time": 1533081600,
	"Open": 7741.745431,
	"High": 7749.4208,
	"Low": 5865,
	"Close": 7020.758088,
	"Volume": 5835.90163729,
	"Turnover": 38947136.22267167
	},
	{
	"Timestamp": "2018-07-01T00:00:00Z",
	"Time": 1530403200,
	"Open": 6388.334698,
	"High": 8487.888658,
	"Low": 6078.081903,
	"Close": 7734.450328,
	"Volume": 5481.35222923,
	"Turnover": 38679649.9969021
	},
	{
	"Timestamp": "2018-06-01T00:00:00Z",
	"Time": 1527811200,
	"Open": 7502.399999,
	"High": 7795.4406,
	"Low": 5736.812481,
	"Close": 6396.825794,
	"Volume": 5199.55127107,
	"Turnover": 34833929.23231995
	},
	{
	"Timestamp": "2018-05-01T00:00:00Z",
	"Time": 1525132800,
	"Open": 9246.207477,
	"High": 10000,
	"Low": 7000,
	"Close": 7476.65173,
	"Volume": 7668.50752124,
	"Turnover": 65113873.07143792
	},
	{
	"Timestamp": "2018-04-01T00:00:00Z",
	"Time": 1522540800,
	"Open": 6932.0581,
	"High": 9717.999999,
	"Low": 6412.000001,
	"Close": 9218,
	"Volume": 7396.39992707,
	"Turnover": 60645015.70571466
	},
	{
	"Timestamp": "2018-03-01T00:00:00Z",
	"Time": 1519862400,
	"Open": 10299.999999,
	"High": 11745.007056,
	"Low": 6620,
	"Close": 6926,
	"Volume": 8641.9566538,
	"Turnover": 75335832.29460683
	},
	{
	"Timestamp": "2018-02-01T00:00:00Z",
	"Time": 1517443200,
	"Open": 10233,
	"High": 11799.999998,
	"Low": 5950,
	"Close": 10299.999999,
	"Volume": 11281.74156935,
	"Turnover": 100294659.74756368
	},
	{
	"Timestamp": "2018-01-01T00:00:00Z",
	"Time": 1514764800,
	"Open": 12933.000001,
	"High": 17390,
	"Low": 8600,
	"Close": 10233,
	"Volume": 9082.61346295,
	"Turnover": 108009356.8534896
	},
	{
	"Timestamp": "2017-12-01T00:00:00Z",
	"Time": 1512086400,
	"Open": 9815.262384,
	"High": 19722,
	"Low": 9150,
	"Close": 12933.000002,
	"Volume": 438.75673357,
	"Turnover": 6235008.49729413
	},
	{
	"Timestamp": "2017-11-01T00:00:00Z",
	"Time": 1509494400,
	"Open": 6467.999999,
	"High": 11192.999996,
	"Low": 5005,
	"Close": 9815.262385,
	"Volume": 410.48833566,
	"Turnover": 3106925.87333113
	}
]	
`

func Test_Analysis_1A(t *testing.T) {
	ctx := context.Background()
	var candles []domain.Candle
	if err := json.Unmarshal([]byte(payload), &candles); err != nil {
		t.Fatalf("Unmarshal: %v", err)
	}
	if len(candles) <= 0 {
		t.Fatal("no Have cadles")
	}

	repoCex := cex.NewRepo()
	repoTA := technical.NewRepo()
	repoChart := chart.NewRepo()
	token := ""
	channelID := map[string]string{}
	chanID := ""
	repoDisc, err := discord.NewRepo(token, channelID)
	if err != nil {
		t.Fatalf("discord.NewRepo: %v", err)
	}

	ucase := utechnical.NewUsecase(repoDisc, repoCex, repoTA, repoChart)
	if err := ucase.Analysis(ctx, chanID, candles); err != nil {
		t.Fatalf("analysis: %v", err)
	}
}
